<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Git Merge vs Rebase - Animaci√≥n Interactiva</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        button {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        button:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        button.active {
            background: rgba(255,255,255,0.4);
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255,215,0,0.3);
        }

        .visualization {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .git-graph {
            position: relative;
            height: 400px;
            margin: 20px 0;
            overflow: hidden;
        }

        .branch-line {
            position: absolute;
            height: 4px;
            border-radius: 2px;
            transition: all 0.6s ease;
        }

        .main-branch {
            background: #4CAF50;
            top: 200px;
            left: 50px;
            width: 500px;
        }

        .feature-branch {
            background: #FF9800;
            top: 120px;
            left: 200px;
            width: 300px;
        }

        .merge-branch {
            background: #9C27B0;
            opacity: 0;
            transition: opacity 0.6s ease;
        }

        .commit {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 3px solid white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            color: white;
            transition: all 0.6s ease;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .commit:hover {
            transform: scale(1.3);
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .commit.main { background: #4CAF50; top: 190px; }
        .commit.feature { background: #FF9800; top: 110px; }
        .commit.merge { background: #9C27B0; }

        .branch-label {
            position: absolute;
            font-weight: 600;
            font-size: 14px;
            padding: 5px 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            backdrop-filter: blur(5px);
        }

        .main-label { color: #4CAF50; top: 160px; left: 50px; }
        .feature-label { color: #FF9800; top: 80px; left: 200px; }

        .explanation {
            background: rgba(255,255,255,0.15);
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
            border-left: 4px solid #ffd700;
        }

        .explanation h3 {
            margin-bottom: 10px;
            color: #ffd700;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .comparison-item {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .comparison-item h4 {
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .merge-title { color: #9C27B0; }
        .rebase-title { color: #2196F3; }

        .pros-cons {
            margin-top: 15px;
        }

        .pros, .cons {
            margin: 10px 0;
        }

        .pros h5 { color: #4CAF50; }
        .cons h5 { color: #F44336; }

        .golden-rule {
            background: linear-gradient(45deg, #FF6B6B, #FF8E53);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(255,107,107,0.3);
        }

        .golden-rule h3 {
            margin-bottom: 10px;
            font-size: 1.5rem;
        }

        @keyframes slideIn {
            from { transform: translateX(-100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animated {
            animation: slideIn 0.6s ease;
        }

        .fade-in {
            animation: fadeIn 0.8s ease;
        }

        @media (max-width: 768px) {
            .container { padding: 15px; }
            h1 { font-size: 2rem; }
            .git-graph { height: 300px; }
            .comparison { grid-template-columns: 1fr; }
            .controls { gap: 10px; }
            button { padding: 10px 20px; font-size: 0.9rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîÄ Git: Merge vs Rebase</h1>
            <p class="subtitle">Comprende las diferencias con animaciones interactivas</p>
        </header>

        <div class="controls">
            <button onclick="showInitial()" class="active" id="btn-initial">üèóÔ∏è Situaci√≥n Inicial</button>
            <button onclick="showMerge()" id="btn-merge">üîó Git Merge</button>
            <button onclick="showRebase()" id="btn-rebase">üìè Git Rebase</button>
            <button onclick="showComparison()" id="btn-comparison">‚öñÔ∏è Comparaci√≥n</button>
            <button onclick="reset()" id="btn-reset">üîÑ Reiniciar</button>
        </div>

        <div class="visualization">
            <div class="git-graph" id="git-graph">
                <!-- L√≠neas de ramas -->
                <div class="branch-line main-branch" id="main-line"></div>
                <div class="branch-line feature-branch" id="feature-line"></div>
                
                <!-- Etiquetas de ramas -->
                <div class="branch-label main-label">main</div>
                <div class="branch-label feature-label">feature</div>
                
                <!-- Commits iniciales -->
                <div class="commit main" style="left: 70px;" data-tooltip="A - Commit inicial">A</div>
                <div class="commit main" style="left: 120px;" data-tooltip="B - Commit en main">B</div>
                <div class="commit feature" style="left: 220px;" data-tooltip="C - Primer commit feature">C</div>
                <div class="commit feature" style="left: 270px;" data-tooltip="D - Segundo commit feature">D</div>
                <div class="commit main" style="left: 170px;" data-tooltip="E - Nuevo commit en main">E</div>
            </div>

            <div class="explanation" id="explanation">
                <h3>üèóÔ∏è Situaci√≥n Inicial</h3>
                <p>Tienes una rama <strong>main</strong> con commits A, B, E y una rama <strong>feature</strong> que se bifurc√≥ despu√©s del commit B con commits C y D. Las ramas han divergido y necesitas integrar los cambios.</p>
            </div>
        </div>

        <div class="comparison" id="comparison-section" style="display: none;">
            <div class="comparison-item">
                <h4 class="merge-title">üîó Git Merge</h4>
                <p>Preserva la historia completa creando un commit de fusi√≥n.</p>
                <div class="pros-cons">
                    <div class="pros">
                        <h5>‚úÖ Ventajas:</h5>
                        <ul>
                            <li>No destructivo</li>
                            <li>Preserva contexto</li>
                            <li>Historial completo</li>
                        </ul>
                    </div>
                    <div class="cons">
                        <h5>‚ùå Desventajas:</h5>
                        <ul>
                            <li>Historia compleja</li>
                            <li>Commits de merge extra</li>
                            <li>Dif√≠cil de seguir</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="comparison-item">
                <h4 class="rebase-title">üìè Git Rebase</h4>
                <p>Crea una historia lineal reescribiendo los commits.</p>
                <div class="pros-cons">
                    <div class="pros">
                        <h5>‚úÖ Ventajas:</h5>
                        <ul>
                            <li>Historia lineal y limpia</li>
                            <li>F√°cil de seguir</li>
                            <li>Sin commits extra</li>
                        </ul>
                    </div>
                    <div class="cons">
                        <h5>‚ùå Desventajas:</h5>
                        <ul>
                            <li>Reescribe historia</li>
                            <li>Puede ser peligroso</li>
                            <li>Pierde contexto temporal</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="golden-rule" id="golden-rule" style="display: none;">
            <h3>‚ö†Ô∏è Regla de Oro del Rebase</h3>
            <p><strong>NUNCA</strong> uses rebase en ramas p√∫blicas que otros desarrolladores est√©n usando. Solo √∫salo en ramas locales privadas.</p>
        </div>
    </div>

    <script>
        let currentState = 'initial';
        
        function setActiveButton(buttonId) {
            document.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(buttonId).classList.add('active');
        }

        function showInitial() {
            currentState = 'initial';
            setActiveButton('btn-initial');
            
            // Reset positions
            const commits = document.querySelectorAll('.commit');
            commits.forEach(commit => {
                commit.style.transform = 'scale(1)';
                commit.style.opacity = '1';
            });
            
            // Reset lines
            document.getElementById('main-line').style.width = '500px';
            document.getElementById('feature-line').style.width = '300px';
            
            // Remove merge commits
            document.querySelectorAll('.merge-commit').forEach(el => el.remove());
            document.querySelectorAll('.merge-line').forEach(el => el.remove());
            
            // Update explanation
            document.getElementById('explanation').innerHTML = `
                <h3>üèóÔ∏è Situaci√≥n Inicial</h3>
                <p>Tienes una rama <strong>main</strong> con commits A, B, E y una rama <strong>feature</strong> que se bifurc√≥ despu√©s del commit B con commits C y D. Las ramas han divergido y necesitas integrar los cambios.</p>
            `;
            
            hideComparison();
        }

        function showMerge() {
            currentState = 'merge';
            setActiveButton('btn-merge');
            
            showInitial(); // Reset first
            
            setTimeout(() => {
                // Create merge commit
                const mergeCommit = document.createElement('div');
                mergeCommit.className = 'commit merge merge-commit';
                mergeCommit.style.left = '320px';
                mergeCommit.style.top = '190px';
                mergeCommit.style.background = '#9C27B0';
                mergeCommit.innerHTML = 'M';
                mergeCommit.setAttribute('data-tooltip', 'M - Merge commit');
                
                // Create merge line
                const mergeLine = document.createElement('div');
                mergeLine.className = 'branch-line merge-line';
                mergeLine.style.background = '#9C27B0';
                mergeLine.style.top = '155px';
                mergeLine.style.left = '280px';
                mergeLine.style.width = '60px';
                mergeLine.style.height = '4px';
                mergeLine.style.transform = 'rotate(45deg)';
                mergeLine.style.transformOrigin = '0 50%';
                
                document.getElementById('git-graph').appendChild(mergeCommit);
                document.getElementById('git-graph').appendChild(mergeLine);
                
                // Animate
                setTimeout(() => {
                    mergeCommit.classList.add('animated');
                    mergeLine.classList.add('animated');
                }, 100);
                
                // Update explanation
                document.getElementById('explanation').innerHTML = `
                    <h3>üîó Git Merge</h3>
                    <p><code>git checkout main && git merge feature</code></p>
                    <p>Se crea un <strong>commit de merge (M)</strong> que conecta ambas ramas. La historia se preserva completamente, pero se vuelve m√°s compleja con m√∫ltiples l√≠neas de desarrollo.</p>
                `;
            }, 500);
            
            hideComparison();
        }

        function showRebase() {
            currentState = 'rebase';
            setActiveButton('btn-rebase');
            
            showInitial(); // Reset first
            
            setTimeout(() => {
                // Move feature commits to tip of main
                const commitC = document.querySelector('.commit.feature[style*="220px"]');
                const commitD = document.querySelector('.commit.feature[style*="270px"]');
                
                if (commitC && commitD) {
                    commitC.style.left = '220px';
                    commitC.style.top = '190px'; // Move to main line
                    commitC.innerHTML = "C'";
                    commitC.setAttribute('data-tooltip', "C' - Commit C rebasado");
                    
                    commitD.style.left = '270px';
                    commitD.style.top = '190px'; // Move to main line
                    commitD.innerHTML = "D'";
                    commitD.setAttribute('data-tooltip', "D' - Commit D rebasado");
                }
                
                // Hide original feature branch line
                const featureLine = document.getElementById('feature-line');
                featureLine.style.opacity = '0.3';
                
                // Extend main line
                const mainLine = document.getElementById('main-line');
                mainLine.style.width = '400px';
                
                // Update explanation
                document.getElementById('explanation').innerHTML = `
                    <h3>üìè Git Rebase</h3>
                    <p><code>git checkout feature && git rebase main</code></p>
                    <p>Los commits C y D se <strong>reescriben</strong> como C' y D' y se mueven al final de main. El resultado es una historia completamente lineal, pero los commits originales desaparecen.</p>
                `;
            }, 500);
            
            hideComparison();
        }

        function showComparison() {
            setActiveButton('btn-comparison');
            document.getElementById('comparison-section').style.display = 'grid';
            document.getElementById('golden-rule').style.display = 'block';
            
            document.getElementById('explanation').innerHTML = `
                <h3>‚öñÔ∏è Comparaci√≥n: ¬øCu√°ndo usar cada uno?</h3>
                <p><strong>Usa Merge cuando:</strong> Trabajas en equipo y quieres preservar el contexto hist√≥rico completo.</p>
                <p><strong>Usa Rebase cuando:</strong> Trabajas en ramas privadas y quieres una historia limpia y lineal.</p>
            `;
        }

        function hideComparison() {
            document.getElementById('comparison-section').style.display = 'none';
            document.getElementById('golden-rule').style.display = 'none';
        }

        function reset() {
            showInitial();
        }

        // Add hover effects for commits
        document.addEventListener('DOMContentLoaded', function() {
            const commits = document.querySelectorAll('.commit');
            commits.forEach(commit => {
                commit.addEventListener('mouseenter', function() {
                    const tooltip = this.getAttribute('data-tooltip');
                    if (tooltip) {
                        this.title = tooltip;
                    }
                });
            });
        });

        // Initialize
        showInitial();
    </script>
</body>
</html>